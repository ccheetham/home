#!/usr/bin/env zsh

export ANT_HOME=$ME_OPT_DIR/ant/current
append_path $ANT_HOME

alias a='ant'

a19() {
    ANT_HOME=$ME_OPT_DIR/ant/1.9
    $ANT_HOME/bin/ant $*
}

a18() {
    ANT_HOME=$ME_OPT_DIR/ant/1.8
    $ANT_HOME/bin/ant $*
}

refresh_ant () {
    local instdir=$ME_OPT_DIR/ant
    local disturl=http://archive.apache.org/dist/ant/binaries
    local -a vers
    versions=(1.9.4 1.8.4)

    mkdir -p $instdir
    for version in $versions
    do
        local shortver=${version%.*}
        if [[ ! -h $instdir/current ]] ; then
            echo linking current to $shortver
            (cd $instdir && ln -s $shortver current)
        fi
        if [[ ! -d $instdir/apache-ant-$version ]]
        then
            echo fetching ant dist for version $shortver
            wget -O - $disturl/apache-ant-${version}-bin.tar.gz 2> /dev/null | tar xfz - -C $instdir
        fi
        if [[ ! -e $instdir/$shortver ]]
        then
            echo linking apache-ant-$version to $shortver
            (cd $instdir && ln -s apache-ant-$version $shortver)
        fi
    done
}
